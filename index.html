<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PLAN DE PRODUCTION - IMAGES</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>PLAN DE PRODUCTION - IMAGES</h1>

  <div id="board" class="board"></div>
  <div style="margin-top:12px;">
    <button id="addThemeBtn">+ TYPE DE PROJET</button>
  </div>

  <!-- Modal -->
  <div id="modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <h3 id="modalTitle">Ã‰DITER PROJET</h3>
      <div class="field"><label>Titre</label><input id="m-title" type="text" /></div>
      <div class="field"><label>Date dÃ©but</label><input id="m-start" type="date" /></div>
      <div class="field"><label>Date fin</label><input id="m-end" type="date" /></div>
      <div class="field"><label>Personne(s) sur le projet</label><input id="m-team" type="text" /></div>
      <div class="field"><label>PrioritÃ©</label>
        <select id="m-priority">
          <option>Haute</option>
          <option>Moyenne</option>
          <option>Basse</option>
        </select>
      </div>
      <div class="modal-actions">
        <button id="modalCancel" class="ghost">ANNULER</button>
        <button id="modalSave">ENREGISTRER</button>
      </div>
    </div>
  </div>

<script type="module">
  // Import Firebase depuis le CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { 
    getFirestore, 
    collection, 
    getDocs, 
    addDoc, 
    updateDoc, 
    deleteDoc, 
    doc 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // âœ… Config Firebase (la tienne)
  const firebaseConfig = {
    apiKey: "AIzaSyAaYmCxLn0aWSAWfww9fnJRvUGM9rt55vE",
    authDomain: "poleimages-8af23.firebaseapp.com",
    projectId: "poleimages-8af23",
    storageBucket: "poleimages-8af23.firebasestorage.app",
    messagingSenderId: "816254286601",
    appId: "1:816254286601:web:ee4e4e8238382fd3e5b1d8"
  };

  // ðŸ”¥ Initialisation Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // --- Exemple basique ---
  // Ajouter un projet
  async function addProjet() {
    const ref = await addDoc(collection(db, "kanban"), {
      title: "Nouveau projet",
      status: "Ã€ faire",
      team: "",
      priority: "Moyenne",
      start: "",
      end: ""
    });
    console.log("Projet ajoutÃ© avec ID :", ref.id);
  }

  // Lire tous les projets
  async function getProjets() {
    const snap = await getDocs(collection(db, "kanban"));
    snap.forEach(doc => {
      console.log(doc.id, "=>", doc.data());
    });
  }

  // Modifier un projet
  async function updateProjet(id) {
    const ref = doc(db, "kanban", id);
    await updateDoc(ref, { status: "En cours" });
    console.log("Projet mis Ã  jour :", id);
  }

  // Supprimer un projet
  async function deleteProjet(id) {
    const ref = doc(db, "kanban", id);
    await deleteDoc(ref);
    console.log("Projet supprimÃ© :", id);
  }

  // ðŸš€ Tests
  await addProjet();
  await getProjets();
</script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script src="script.js"></script>
</body>
</html>
